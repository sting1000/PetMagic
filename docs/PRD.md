产品需求文档 (PRD) - AI 萌宠造物 (PetMagic)

|

| 文档信息 | 内容 |
| 项目名称 | AI 萌宠造物 (PetMagic) |
| 版本号 | v1.0 (MVP) |
| 文档状态 | 待评审 |
| 最后更新 | 2025-11-27 |
| 平台 | 微信小程序 |

1. 项目背景与目标 (Project Overview)

1.1 背景

当前 AI 生成图片市场中，针对“宠物”的垂直应用稀缺。现有通用工具（如 Midjourney、即梦）存在操作门槛高、无法保持宠物特征、无法精准控制构图等痛点。特别是 iOS 16+ 推出的“景深锁屏（Depth Effect）”功能，用户极难通过普通照片触发，存在巨大的工具化缺口。

1.2 核心价值主张

针对壁纸： 提供“傻瓜式”生成的、完美适配 iPhone 锁屏时间组件的 3D 景深壁纸。

针对社交： 提供一键生成“去背景 + 夸张表情 + 自动配文”的宠物表情包，促进裂变传播。

1.3 核心指标 (Success Metrics)

转化率： 上传照片 -> 充值/消耗积分的比例。

保存率： 生成结果 -> 保存到本地相册的比例（衡量生成质量）。

裂变系数： 通过表情包水印或分享活动带来的新用户数。

2. 用户角色 (User Persona)

| 用户群体 | 特征描述 | 核心诉求 |
| 精致铲屎官 | 18-30岁女性为主，iPhone 用户，重度社交媒体使用者。 | 想要独一无二的宠物壁纸，喜欢在朋友圈“晒娃”。 |
| 表情包大户 | 喜欢斗图，活跃于各种微信群。 | 需要新鲜的、有趣的表情包来表达情绪。 |

3. 业务流程图 (User Flow)

graph TD
    A[用户进入小程序] --> B{选择功能模块}
    
    %% 3D壁纸流程
    B -->|3D 景深壁纸| C[上传宠物正脸照]
    C --> D[选择风格<br>3D透视/赛博/皮克斯]
    D --> E{积分是否充足?}
    E -->|否| F[充值 / 看广告]
    F --> E
    E -->|是| G[AI 生成中<br>Flux模型 + 构图控制]
    G --> H[生成结果页<br>带全屏水印]
    H --> I{是否满意?}
    I -->|不满意| J[重新生成]
    I -->|满意| K[扣除积分 & 下载无水印图]
    K --> L[弹出 iOS 设置引导]
    
    %% 表情包流程
    B -->|表情包工厂| M[上传宠物照片]
    M --> N[选择情绪包<br>打工/发疯/阴阳怪气]
    N --> O[AI 生成 + 自动抠图 + 配文]
    O --> P[预览 4-9 张表情组]
    P --> Q[一键添加到微信表情/保存]



4. 功能需求详情 (Functional Requirements)

4.1 核心模块 A：3D 景深壁纸生成器

此模块为高客单价/付费核心。

| ID | 功能名称 | 优先级 | 需求描述 | 验收标准 |
| F-01 | 照片上传与校验 | P0 | 支持拍照或相册选择。前端需校验图片分辨率（建议 > 512x512）和人脸/宠脸识别。 | 若图片模糊或无主体，提示“请上传清晰的正脸照”。 |
| F-02 | 风格选择器 | P0 | 提供预设风格选项。MVP版本包含：  1. 极致景深 (iOS 专用)  2. 迪士尼/皮克斯风  3. 赛博朋克霓虹风 | 选中风格后有高亮状态。 |
| F-03 | 构图控制 (核心) | P0 | 后端逻辑： 无论用户上传什么图，生成结果必须强制遵循“顶部留白 35%”的构图规则，确保不遮挡时间组件。 | 生成图的主体头部位于画面中下部，背景干净。 |
| F-04 | 锁屏预览模式 | P1 | 在结果页提供“预览”按钮。点击后，在图片上层覆盖一个模拟的 iPhone 时间/日期组件。 | 用户能直观看到时间是否压住了宠物的头。 |
| F-05 | 高清下载 | P0 | 支付/扣分后，提供 1170x2532 (9:19.5) 分辨率的高清图下载。 | 下载到相册的图片无水印。 |
| F-06 | 设置引导弹窗 | P1 | 下载成功后，弹窗提示：“设置壁纸时，请双指捏合缩放，直到宠物位于时间下方”。 | 包含一张 GIF 动图演示。 |

4.2 核心模块 B：AI 表情包工厂

此模块为流量裂变/高频使用核心。

| ID | 功能名称 | 优先级 | 需求描述 | 验收标准 |
| F-07 | 情绪主题包 | P0 | 提供套餐式选择：  1. 打工人套装 (累、下班、摸鱼)  2. 发疯套装 (尖叫、阴暗爬行)  3. 可爱套装 (贴贴、要饭) | 每个套装包含 4-6 个不同 Prompt。 |
| F-08 | 自动抠图与描边 | P0 | 生成图片后，自动去除背景，并给主体添加 2-3px 的白色描边 + 投影，模拟贴纸质感。 | 背景必须为透明 (Alpha通道)，边缘平滑。 |
| F-09 | 随机神配文 | P1 | 系统建立文案库。根据情绪标签，随机在图片底部添加文字（如“禁止画饼”）。支持点击“换一句”刷新文案。 | 文字清晰，字体可爱，位置居中。 |
| F-10 | 表情包压缩 | P0 | 输出的表情包文件需压缩至 < 1MB (微信限制)，格式为 WebP 或 PNG。 | 发送到微信时不模糊，且能直接添加。 |

4.3 用户与支付系统

| ID | 功能名称 | 优先级 | 需求描述 |
| F-11 | 积分钱包 | P0 | 展示当前积分余额。新用户默认赠送 20 积分（约 2 次试玩）。 |
| F-12 | 充值中心 | P0 | 接入微信支付。  套餐 A：￥3.9 (20积分)  套餐 B：￥9.9 (60积分 - 推荐)  套餐 C：￥19.9 (150积分) |
| F-13 | 激励视频广告 | P1 | “积分不足？看视频免费领 5 积分”。接入微信广告组件。 |

5. 技术架构与工程策略 (Technical Strategy)

为了降低初期投入，采用 Serverless + API 的轻量化架构。

5.1 总体架构

前端： 微信小程序原生开发 或 Uni-app。

后端： 腾讯云云函数 (SCF) 或 AWS Lambda。负责业务逻辑、积分扣除、请求转发。

AI 推理层 (GPU Cloud)： 调用 Replicate / Fal.ai 的 API 接口。

5.2 关键模型选型 (Model Stack)

底模 (Checkpoints):

推荐使用 Flux.1 

$$schnell$$

 或 Flux.1 

$$dev$$

。

理由： Flux 对提示词的遵循能力极强，能精准执行“景深”、“模糊背景”等指令，优于 SDXL。

特征保持 (Identity Retention):

使用 IP-Adapter。

参数设定： 权重建议在 0.6 - 0.75 之间。过高会僵硬，过低不像。

图像处理 (Post-Processing):

抠图： RMBG-1.4 (开源模型，速度快，效果好)。

放大： RealESRGAN (用于壁纸高清化)。

5.3 Prompt 工程示例 (后端配置)

场景：3D 景深壁纸

[System Prompt]: You are an expert photographer creating iOS depth-effect wallpapers.
[User Prompt]: A photo of a [dog/cat] looking up, minimalist composition, creamy bokeh background, distinct separation between subject and background, huge top margin, subject located at the bottom center, high quality, 8k.
[Negative Prompt]: messy background, complex patterns, text, watermark, subject cropped, subject touching top edge.



6. UI/UX 设计原则

极简主义： 操作步骤不能超过 3 步。

视觉反馈： 由于 AI 生成需要 15-30 秒，必须设计有趣的 Loading 动画（如一只猫在追尾巴），并轮播提示文案（“正在分析狗狗的颜值...”、“正在挑选最美的滤镜...”）。

结果导向： 结果页的“保存”按钮要最大、最醒目。

7. 风险控制与合规 (Risk & Compliance)

| 风险点 | 风险等级 | 应对措施 |
| 内容安全 (鉴黄/暴恐) | 高 (红线) | 1. 上传图片接入微信官方 security.imgSecCheck 接口。  2. 生成结果再次通过鉴黄 API 过滤。  3. 敏感词过滤 Prompt。 |
| 生成结果不像 | 中 | 1. 增加“不满意反馈”入口。  2. 在上传页增加图例，引导用户上传“光线充足的正脸照”。 |
| API 成本失控 | 中 | 1. 严格限制单用户每日免费次数。  2. 监控 API 余额，设置自动熔断报警。 |

8. 数据埋点 (Analytics)

需在小程序后台重点监控以下数据：

Funnel (漏斗)： 首页 UV -> 上传点击 UV -> 生成成功 UV -> 保存/支付 UV。

Retain (留存)： 次日留存率（验证壁纸是否是一次性需求）。

Share (分享)： 多少用户通过表情包页面的“分享解锁”功能带来了新流量。

文档结束